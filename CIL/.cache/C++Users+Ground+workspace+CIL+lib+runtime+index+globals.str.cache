Module("runtime/index/globals",[Imports([Import("runtime/index/core"),Import("runtime/index/query")]),Signature([Constructors([OpDecl("Global",FunType([ConstType(SortNoArgs("URI"))],ConstType(SortNoArgs("Entry")))),OpDecl("Global",FunType([ConstType(SortNoArgs("URI")),ConstType(Sort("List",[SortNoArgs("Entry")]))],ConstType(SortNoArgs("Entry"))))])]),Rules([RDefNoArgs("index-globals-path",Rule(Var("names"),App(Seq(CallT(SVar("separate-by"),[],[NoAnnoList(Str("\"/\""))]),CallNoArgs(SVar("concat-strings"))),Var("path")),[WithClause(CondChoice(CallNoArgs(SVar("is-list")),Assign(Var("path"),App(CallNoArgs(SVar("concat")),NoAnnoList(List([Var("names"),NoAnnoList(List([NoAnnoList(Str("\"globals\"")),NoAnnoList(Str("\".internal\""))]))])))),Assign(Var("path"),NoAnnoList(List([Var("names"),NoAnnoList(Str("\"global\"")),NoAnnoList(Str("\".internal\""))])))))])),RDefNoArgs("index-globals-uri",Rule(Var("names"),Var("uri"),[WithClause(CondChoice(CallNoArgs(SVar("is-list")),Assign(Var("uri"),App(CallNoArgs(SVar("concat")),NoAnnoList(List([Var("names"),NoAnnoList(List([NoAnnoList(Str("\"globals\"")),NoAnnoList(Str("\".internal\""))]))])))),Assign(Var("uri"),NoAnnoList(List([Var("names"),NoAnnoList(Str("\"global\"")),NoAnnoList(Str("\".internal\""))])))))])),RDefT("index-get-global",[],[DefaultVarDec("name")],Rule(Wld,Var("value"),Assign(NoAnnoList(Op("Global",[Wld,Var("value")])),App(Seq(CallNoArgs(SVar("index-get-all")),CallNoArgs(SVar("Hd"))),NoAnnoList(Op("Global",[App(CallNoArgs(SVar("index-globals-uri")),Var("name")),NoAnnoList(Tuple([]))])))))),RDefT("index-get-all-globals",[],[DefaultVarDec("name")],Rule(Wld,Var("values'"),[WithClause(Seq(Assign(Var("values"),App(CallNoArgs(SVar("index-get-all")),NoAnnoList(Op("Global",[App(CallNoArgs(SVar("index-globals-uri")),Var("name")),NoAnnoList(Tuple([]))])))),Assign(Var("values'"),App(Call(SVar("filter"),[Match(NoAnnoList(Op("Global",[Wld,RootApp(Id)])))]),Var("values")))))])),RDefT("index-add-global",[],[DefaultVarDec("name")],Rule(Var("value"),RootApp(Id),[WithClause(BA(CallT(SVar("index-add"),[],[RootApp(CallNoArgs(SVar("index-globals-path")))]),NoAnnoList(Op("Global",[App(CallNoArgs(SVar("index-globals-uri")),Var("name")),Var("value")]))))])),RDefT("index-set-global",[],[DefaultVarDec("name")],Rule(Var("value"),RootApp(Id),[WithClause(Seq(CallT(SVar("index-clear-global"),[],[Var("name")]),BA(CallT(SVar("index-add-global"),[],[Var("name")]),Var("value"))))])),RDefT("index-clear-global",[],[DefaultVarDec("name")],Rule(Wld,RootApp(Id),[WithClause(BA(Seq(CallNoArgs(SVar("index-globals-path")),CallNoArgs(SVar("index-clear-partition"))),Var("name")))]))]),Rules([RDefNoArgs("index-boolean-globals-path",Rule(Var("names"),App(Seq(CallT(SVar("separate-by"),[],[NoAnnoList(Str("\"/\""))]),CallNoArgs(SVar("concat-strings"))),Var("path")),[WithClause(CondChoice(CallNoArgs(SVar("is-list")),Assign(Var("path"),App(CallNoArgs(SVar("concat")),NoAnnoList(List([Var("names"),NoAnnoList(List([NoAnnoList(Str("\"boolean\"")),NoAnnoList(Str("\"globals\"")),NoAnnoList(Str("\".internal\""))]))])))),Assign(Var("path"),NoAnnoList(List([Var("names"),NoAnnoList(Str("\"boolean\"")),NoAnnoList(Str("\"global\"")),NoAnnoList(Str("\".internal\""))])))))])),RDefNoArgs("index-boolean-globals-uri",Rule(Var("names"),Var("uri"),[WithClause(CondChoice(CallNoArgs(SVar("is-list")),Assign(Var("uri"),App(CallNoArgs(SVar("concat")),NoAnnoList(List([Var("names"),NoAnnoList(List([NoAnnoList(Str("\"boolean\"")),NoAnnoList(Str("\"globals\"")),NoAnnoList(Str("\".internal\""))]))])))),Assign(Var("uri"),NoAnnoList(List([Var("names"),NoAnnoList(Str("\"boolean\"")),NoAnnoList(Str("\"global\"")),NoAnnoList(Str("\".internal\""))])))))])),RDefT("index-enable-global",[],[DefaultVarDec("name")],Rule(Wld,RootApp(Id),[WithClause(BA(CallT(SVar("index-add"),[],[RootApp(CallNoArgs(SVar("index-globals-path")))]),NoAnnoList(Op("Global",[App(CallNoArgs(SVar("index-boolean-globals-uri")),Var("name"))]))))])),RDefT("index-disable-global",[],[DefaultVarDec("name")],Rule(Wld,RootApp(Id),[WithClause(BA(Seq(CallNoArgs(SVar("index-boolean-globals-path")),CallNoArgs(SVar("index-clear-partition"))),Var("name")))])),RDefT("index-is-global-enabled",[],[DefaultVarDec("name")],Rule(Wld,RootApp(Id),BA(Seq(CallNoArgs(SVar("index-get-all")),CallNoArgs(SVar("Hd"))),NoAnnoList(Op("Global",[App(CallNoArgs(SVar("index-boolean-globals-uri")),Var("name"))])))))])])