Module("runtime/properties/query",[Imports([Import("runtime/nabl/query"),Import("runtime/nabl/uri"),Import("runtime/task/core"),Import("runtime/properties/entries"),Import("runtime/properties/tasks"),Import("runtime/properties/interface"),Import("runtime/nabl/interface")]),Rules([SDefT("get-or-create-property-task",[],[DefaultVarDec("ctx"),DefaultVarDec("kind")],LChoice(CallT(SVar("get-property-task"),[],[Var("kind")]),LChoice(Call(SVar("map"),[CallT(SVar("create-property-task"),[],[Var("ctx"),Var("kind")])]),CallT(SVar("create-property-task"),[],[Var("ctx"),Var("kind")])))),SDefT("get-property-task",[],[DefaultVarDec("kind")],LChoice(Call(SVar("map"),[CallT(SVar("get-property-task"),[],[Var("kind")])]),Seq(CallNoArgs(SVar("get-annos")),Call(SVar("fetch-elem"),[Match(NoAnnoList(Tuple([Var("kind"),RootApp(Id)])))]))))]),Rules([SDefT("get-property",[],[DefaultVarDec("kind")],Seq(LChoice(CallT(SVar("get-property-task"),[],[Var("kind")]),Seq(Call(SVar("try"),[CallNoArgs(SVar("nabl-get-name"))]),CallT(SVar("get-index-property"),[],[Var("kind")]))),Call(SVar("try"),[Seq(CallNoArgs(SVar("insert-results")),CallNoArgs(SVar("Hd")))]))),SDefT("get-index-property",[],[DefaultVarDec("kind")],Seq(CallNoArgs(SVar("nabl-uris")),Call(SVar("fetch-elem"),[Seq(Build(NoAnnoList(Op("Prop",[RootApp(Id),Var("kind"),NoAnnoList(Tuple([]))]))),CallNoArgs(SVar("nabl-get-value")))]))),SDefT("get-index-properties",[],[DefaultVarDec("kind")],Seq(CallNoArgs(SVar("nabl-uris")),Call(SVar("mapconcat"),[Seq(Build(NoAnnoList(Op("Prop",[RootApp(Id),Var("kind"),NoAnnoList(Tuple([]))]))),CallNoArgs(SVar("nabl-get-all-values")))])))])])