Module("codegen/example",[Imports([Import("milestone1/MiniJava"),Import("milestone2/MiniJava.core"),Import("lib/jasmin/JasminXT")]),Rules([SDefNoArgs("to-jbc",Choice(CallNoArgs(SVar("program-to-jbc")),Choice(CallNoArgs(SVar("class-to-jbc")),Choice(CallNoArgs(SVar("stmt-to-jbc")),CallNoArgs(SVar("exp-to-jbc")))))),RDefNoArgs("exp-to-jbc",RuleNoCond(NoAnnoList(Op("IntValue",[Var("i")])),NoAnnoList(List([NoAnnoList(Op("LDC",[Var("i")]))])))),RDefNoArgs("program-to-jbc",Rule(NoAnnoList(Op("Program",[Var("m"),Var("c")])),Var("result"),Assign(Var("result"),App(CallNoArgs(SVar("class-to-jbc")),Var("m"))))),RDefNoArgs("class-to-jbc",Rule(NoAnnoList(Op("MainClass",[Var("n"),Var("id2"),Var("s")])),Var("r"),Seq(Assign(Var("header"),NoAnnoList(Op("JBCHeader",[NoAnnoList(Op("None",[])),NoAnnoList(Op("None",[])),NoAnnoList(Op("JBCClass",[NoAnnoList(List([NoAnnoList(Op("PUBLIC",[]))])),App(CallNoArgs(SVar("strip-annos")),Var("n"))])),NoAnnoList(Op("JBCSuper",[NoAnnoList(Str("\"java/lang/Object\""))])),NoAnnoList(List([])),NoAnnoList(Op("None",[])),NoAnnoList(Op("None",[])),NoAnnoList(Op("None",[]))]))),Seq(Assign(Var(ListVar("statement*")),App(CallNoArgs(SVar("stmt-to-jbc")),Var("s"))),Seq(Assign(Var(ListVar("list*")),NoAnnoList(List([NoAnnoList(Op("JBCLimitStack",[NoAnnoList(Str("\"2\""))])),Var(ListVar("statement*")),NoAnnoList(Op("RETURN",[]))]))),Seq(Assign(Var("method"),NoAnnoList(List([NoAnnoList(Op("JBCMethod",[NoAnnoList(List([NoAnnoList(Op("PUBLIC",[]))])),NoAnnoList(Op("Init",[])),NoAnnoList(Op("JBCMethodDesc",[NoAnnoList(List([])),NoAnnoList(Op("Void",[]))])),NoAnnoList(List([NoAnnoList(Op("ALOAD_0",[])),NoAnnoList(Op("INVOKESPECIAL",[NoAnnoList(Op("JBCMethodRef",[NoAnnoList(Op("CRef",[NoAnnoList(Str("\"java/lang/Object\""))])),NoAnnoList(Op("MRef",[NoAnnoList(Op("Init",[]))])),NoAnnoList(Op("JBCMethodDesc",[NoAnnoList(List([])),NoAnnoList(Op("Void",[]))]))]))])),NoAnnoList(Op("RETURN",[]))]))])),NoAnnoList(Op("JBCMethod",[NoAnnoList(List([NoAnnoList(Op("PUBLIC",[])),NoAnnoList(Op("STATIC",[]))])),NoAnnoList(Str("\"main\"")),NoAnnoList(Op("JBCMethodDesc",[NoAnnoList(List([NoAnnoList(Op("Array",[NoAnnoList(Op("Reference",[NoAnnoList(Op("CRef",[NoAnnoList(Str("\"java/lang/String\""))]))]))]))])),NoAnnoList(Op("Void",[]))])),Var(ListVar("list*"))]))]))),Assign(Var("r"),NoAnnoList(Op("JBCFile",[Var("header"),NoAnnoList(List([])),Var("method")]))))))))),RDefNoArgs("stmt-to-jbc",Rule(NoAnnoList(Op("Print",[Var("s")])),Var(ListVar("result*")),Seq(Assign(Var(ListVar("static*")),NoAnnoList(List([NoAnnoList(Op("GETSTATIC",[NoAnnoList(Op("JBCFieldRef",[NoAnnoList(Op("CRef",[NoAnnoList(Str("\"java/lang/System\""))])),NoAnnoList(Op("FRef",[NoAnnoList(Str("\"out\""))])),NoAnnoList(Op("JBCFieldDesc",[NoAnnoList(Op("Reference",[NoAnnoList(Op("CRef",[NoAnnoList(Str("\"java/io/PrintStream\""))]))]))]))]))]))]))),Seq(Assign(Var(ListVar("invoke*")),NoAnnoList(List([NoAnnoList(Op("INVOKEVIRTUAL",[NoAnnoList(Op("JBCMethodRef",[NoAnnoList(Op("CRef",[NoAnnoList(Str("\"java/io/PrintStream\""))])),NoAnnoList(Op("MRef",[NoAnnoList(Str("\"println\""))])),NoAnnoList(Op("JBCMethodDesc",[NoAnnoList(List([NoAnnoList(Op("Int",[]))])),NoAnnoList(Op("Void",[]))]))]))]))]))),Seq(Assign(Var(ListVar("op*")),App(CallNoArgs(SVar("exp-to-jbc")),Var("s"))),Assign(Var(ListVar("result*")),NoAnnoList(List([Var(ListVar("static*")),Var(ListVar("op*")),Var(ListVar("invoke*"))]))))))))])])